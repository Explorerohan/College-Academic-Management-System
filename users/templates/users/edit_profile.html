{% extends 'users/base.html' %}
{% block title %}Edit Profile | Academic Management System{% endblock %}
{% block content %}
<div class="min-h-screen bg-gray-50 flex flex-col items-center justify-center py-8 px-2">
    <div class="w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col md:flex-row">
        <!-- Profile Sidebar -->
        <div class="bg-blue-600 flex flex-col items-center justify-center p-8 md:w-1/3">
            <div class="relative group">
                {% if user.profile_image %}
                    <img id="preview" src="{{ user.profile_image.url }}" alt="Profile" class="w-28 h-28 rounded-full object-cover border-4 border-white shadow-lg transition-transform group-hover:scale-105">
                {% else %}
                    <img id="preview" src="https://ui-avatars.com/api/?name={{ user.full_name|default:user.email }}&background=3b82f6&color=fff&size=128" class="w-28 h-28 rounded-full object-cover border-4 border-white shadow-lg transition-transform group-hover:scale-105">
                {% endif %}
                <label for="profile_image" class="absolute bottom-2 right-2 bg-white p-2 rounded-full shadow cursor-pointer hover:bg-blue-100 transition">
                    <i class="fas fa-camera text-blue-600"></i>
                </label>
            </div>
            <h2 class="text-xl font-bold text-white mt-4">{{ user.full_name }}</h2>
            <p class="text-blue-100 text-sm">{{ user.email }}</p>
            <span class="mt-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold">Student</span>
        </div>
        <!-- Edit Form -->
        <div class="flex-1 p-8">
            <h1 class="text-2xl font-bold text-gray-800 mb-6 flex items-center"><i class="fas fa-user-edit mr-2 text-blue-600"></i>Edit Profile</h1>
            <form method="post" enctype="multipart/form-data" id="profile-form" class="space-y-6">
                {% csrf_token %}
                <input type="file" id="profile_image" name="profile_image" class="hidden" accept="image/*" onchange="loadFile(event)">
                <div>
                    <label for="full_name" class="block text-gray-700 font-semibold mb-1">Full Name</label>
                    <div class="relative">
                        <span class="absolute left-3 top-2.5 text-blue-400"><i class="fas fa-user"></i></span>
                        <input type="text" id="full_name" name="full_name" value="{{ user.full_name }}" class="w-full pl-10 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Enter your full name">
                    </div>
                </div>
                <div>
                    <label for="bio" class="block text-gray-700 font-semibold mb-1">Bio</label>
                    <div class="relative">
                        <span class="absolute left-3 top-2.5 text-blue-400"><i class="fas fa-info-circle"></i></span>
                        <textarea id="bio" name="bio" class="w-full pl-10 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Tell us about yourself...">{{ user.bio }}</textarea>
                    </div>
                </div>
                <div class="flex justify-end">
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition flex items-center"><i class="fas fa-save mr-2"></i>Update Profile</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script>
    var loadFile = function(event) {
        var output = document.getElementById('preview');
        output.src = URL.createObjectURL(event.target.files[0]);
        output.onload = function() {
            URL.revokeObjectURL(output.src)
        }
    };
</script>
{% endblock %} 